#!/bin/bash

if [[ -z $1 ]]; then
	if [[ -t 0 ]]; then
		nvim
		exit 0
	else
		exit 0
	fi
fi

file=$1
dir=${file%/*}

_sudo(){
    if [[ -t 0 ]]; then
        sudo nvim "$*"
    else
        $TERMINAL -e "sudo nvim $*"
    fi
}

_vim(){
    if [[ -t 0 ]]; then
       nvim "$*"
    else
        $TERMINAL -e "nvim $*"
    fi
}

if [[ ! -w $dir ]]; then
    _sudo "$*"
else
    _vim "$*"
fi
